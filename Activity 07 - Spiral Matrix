#include <stdio.h>
#include <stdlib.h>

int main()
{
    int rows, cols;
    
    printf("Insert rows:\n");
    scanf("%d", rows);
    printf("Insert collumns:\n");
    scanf("%d", cols);
    
    int *A = (int*)malloc((size_t)rows*(size_t)cols*sizeof(int));
    printf("Insert the values of the array:\n");
    for (int i = 0; i < rows; i++){
        for (int j = 0; j < rows; j++){
            printf("Elemento [%d][%d]: ", i, j);
            scanf("%d", &A[i * cols + j]);
        }    
    }
    int top=0, bottom=rows-1;
        int left=0, right=cols-1;
       
        printf("\nMatriz en espiral\n");
        while (top <= bottom && left <= right) {

        for (int j = left; j <= right; j++)
            printf("%d ", A[top * cols + j]);
        top++;

        for (int i = top; i <= bottom; i++)
            printf("%d ", A[i * cols + right]);
        right--;

        if (top <= bottom) {
            for (int j = right; j >= left; j--)
                printf("%d ", A[bottom * cols + j]);
            bottom--;
        }

        if (left <= right) {
            for (int i = bottom; i >= top; i--)
                printf("%d ", A[i * cols + left]);
            left++;
        }
    }
       
    return 0;
}
